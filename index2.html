<html>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">

<head>
  <link rel="stylesheet" href="index.css">
  <!-- 开发环境版本，包含了有帮助的命令行警告 -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
      m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(83849410, "init", {
      clickmap:true,
      trackLinks:true,
      accurateTrackBounce:true
    });
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/83849410" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->

  <script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>
  <script>
    L2Dwidget.init({
      "model": {
        //jsonpath控制显示那个小萝莉模型，下面这个就是我觉得最可爱的小萝莉模型
        //jsonPath: "https://unpkg.com/live2d-widget-model-chitose@1.0.5/assets/chitose.model.json",
        //jsonPath: "https://unpkg.com/live2d-widget-model-chitose@1.0.5/assets/chitose.physics.json",
        //jsonPath: "https://unpkg.com/live2d-widget-model-hibiki@1.0.5/assets/hibiki.model.json",
        jsonPath: "https://unpkg.com/live2d-widget-model-nico@1.0.5/assets/nico.model.json",
        "scale": 1
      },
      "display": {
        "position": "right", //看板娘的表现位置
        "width": 150,  //小萝莉的宽度
        "height": 300, //小萝莉的高度
        "hOffset": -20,
        "vOffset": -20
      },
      "mobile": {
        "show": true,
        "scale": 0.5
      },
      "react": {
        "opacityDefault": 0.7,
        "opacityOnHover": 0.2
      }
    });
  </script>
</head>


<body>
  <button id="btn" type="button" onclick="moveCat(100, 200)">haha</button>
  <div id="data-div"><textarea id="data-textarea" rows="28" style="width:100%;background-color:black;color:green;"></textarea></div>
<!--
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script>
<script>
  L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",model:{scale:1.2,hHeadPos:.5,vHeadPos:.618,jsonPath:"/live2dw/assets/tororo.model.json"},display:{superSample:2,width:150,height:300,position:"right",hOffset:0,vOffset:-20},mobile:{show:!1,scale:.5},react:{opacityDefault:.7,opacityOnHover:.2},log:!1,tagMode:!1})
</script>
<div id="live2d-widget" class="live2d-widget-container" style="position: fixed; right: 0px; bottom: -20px; width: 150px; height: 300px; z-index: 99999; opacity: 1; pointer-events: none;"><canvas id="live2dcanvas" width="300" height="600" style="position: absolute; left: 0px; top: 0px; width: 150px; height: 300px;"></canvas></div>
-->
<script>
  function moveCat(x, y){
    document.getElementById("live2dcanvas").setAttribute("style","position: fixed; opacity: 0.7; left: " + x + "px; bottom: " + y + "px; z-index: 1; pointer-events: none;")
  }

  document.getElementById("data-div").click(function(){
moveCat(200,400);
  });
  var paint = false;

var start = false;

var canvas = document.getElementById("live2dcanvas");
//canvas.width = 800;
//canvas.height = 800;
var offsetY = canvas.offsetTop;
var offsetX = canvas.offsetLeft;
var y;
var x;
var context = canvas.getContext("2d");
function mousemove(e) {
if (paint == true){
if (start == false){
context.moveTo(0, 0);

start = true;

} else {
context.moveTo(x, y);

}

x = e.pageX - offsetX;

y = e.pageY - offsetY;

context.lineTo(x, y);

context.stroke();

}

}

function mousedown(event) {
paint = true;

console.log("down")

}

function mouseup(event) {
paint = false;

console.log("up")

}

  var ele = document.getElementById("data-textarea");
  ele.value = "";
  // source = new EventSource("http://oceanflyboss.youban.com:20041/api/liveshow/material/info.sse");
  //       source.onopen =function(e){
  //           console.log("连接已经建立：",this.readyState );
  //       };
  //       source.onmessage =function(event){
  //           console.log("服务器数据:",event.data);
  //           jdata = JSON.parse(event.data);
          
  //           ele.value = ele.value + "[root]#" + jdata.data + "\n";
  //           //if (event.data.length > 0) {
  //           //    ele.value = ele.value + "[root]#" + event.data + "\n";
  //           //    ele.scrollTop = ele.scrollHeight;
  //           //}
  //           // if (event.data.indexOf("end!!!") > -1) {
  //           //     //console.log("sse end：", this.readyState);
  //           //     var ii = event.data.indexOf("end!!!");
  //           //     var status = event.data.slice(ii + 6, ii + 7);
  //           //     l.ladda('stop');

  //           //     source.close();
  //           //     if (status == "1") {
  //           //         isSuccess = 1;
  //           //         swal({
  //           //             title: "发布成功",
  //           //             type: "success",
  //           //             showCancelButton: false,
  //           //             confirmButtonColor: "#DD6B55",
  //           //             confirmButtonText: "确定",
  //           //         }, function () {
  //           //             window.location.reload();
  //           //         });
  //           //     } else {
  //           //         isSuccess = -1;
  //           //         swal(data.msg, "", "error");
  //           //     }
  //           // }
  //       };
  //       source.onerror =function(err){
  //           console.log("连接出错：", this.readyState);
  //       };
</script>
</body>

</html>